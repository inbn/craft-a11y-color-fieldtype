{"version":3,"sources":["A11ycolor.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","process","__filename","requireFn","makeRequire","stringRequire","defineCache","loaderCache","alreadyCalled","path","normalize","name","baseName","baseParts","charAt","ary","part","splice","trimDots","split","slice","concat","join","runFactory","id","deps","factory","m","result","uri","map","depName","undefined","apply","define","Array","isArray","systemRequire","relId","amdRequire","callback","nextTick","toUrl","filePath","indexOf","dirname","filename","arguments","prefix","plugin","relName","index","originalId","hasOwnProperty","substring","load","value","fromText","text","makeLoad","amd","this","_process","2","ColorContrastChecker","prototype","fontSize","rgbClass","toString","g","b","isValidSixDigitColorCode","hex","test","isValidThreeDigitColorCode","isValidColorCode","convertColorToSixDigit","hexToLuminance","color","getRGBFromHex","LRGB","calculateLRGB","calculateLuminance","check","colorA","colorB","l1","l2","contrastRatio","getContrastRatio","verifyContrastRatio","checkPairs","pairs","results","pair","push","lRGB","isLevelAA","WCAG_AA","isLevelAAA","WCAG_AAA","rVal","gVal","bVal","rgb","Object","create","parseInt","calculateSRGB","key","sRGB","parseFloat","val","Math","pow","lumA","lumB","lighter","darker","ratio","amdefine","3","normalizeArray","parts","allowAboveRoot","up","last","unshift","splitPathRe","splitPath","exec","filter","xs","res","resolve","resolvedPath","resolvedAbsolute","cwd","TypeError","p","isAbsolute","trailingSlash","substr","paths","relative","from","to","trim","arr","start","end","fromParts","toParts","min","samePartsLength","outputParts","sep","delimiter","root","dir","basename","ext","extname","str","len","4","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","args","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","5","$","window","document","pluginName","defaults","Plugin","element","options","extend","_defaults","_name","init","_this","colorContrastChecker","$colorFieldContainer","$colorField","find","proxy","updateColorContrast","contrastColor","fieldColor","console","log","fn","each","data","jQuery","color-contrast-checker"],"mappings":"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","file":"A11ycolor.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){\n(function (process,__filename){\n/** vim: et:ts=4:sw=4:sts=4\n * @license amdefine 1.0.1 Copyright (c) 2011-2016, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/amdefine for details\n */\n\n/*jslint node: true */\n/*global module, process */\n'use strict';\n\n/**\n * Creates a define for node.\n * @param {Object} module the \"module\" object that is defined by Node for the\n * current module.\n * @param {Function} [requireFn]. Node's require function for the current module.\n * It only needs to be passed in Node versions before 0.5, when module.require\n * did not exist.\n * @returns {Function} a define function that is usable for the current node\n * module.\n */\nfunction amdefine(module, requireFn) {\n    'use strict';\n    var defineCache = {},\n        loaderCache = {},\n        alreadyCalled = false,\n        path = require('path'),\n        makeRequire, stringRequire;\n\n    /**\n     * Trims the . and .. from an array of path segments.\n     * It will keep a leading path segment if a .. will become\n     * the first path segment, to help with module name lookups,\n     * which act like paths, but can be remapped. But the end result,\n     * all paths that use this function should look normalized.\n     * NOTE: this method MODIFIES the input array.\n     * @param {Array} ary the array of path segments.\n     */\n    function trimDots(ary) {\n        var i, part;\n        for (i = 0; ary[i]; i+= 1) {\n            part = ary[i];\n            if (part === '.') {\n                ary.splice(i, 1);\n                i -= 1;\n            } else if (part === '..') {\n                if (i === 1 && (ary[2] === '..' || ary[0] === '..')) {\n                    //End of the line. Keep at least one non-dot\n                    //path segment at the front so it can be mapped\n                    //correctly to disk. Otherwise, there is likely\n                    //no path mapping for a path starting with '..'.\n                    //This can still fail, but catches the most reasonable\n                    //uses of ..\n                    break;\n                } else if (i > 0) {\n                    ary.splice(i - 1, 2);\n                    i -= 2;\n                }\n            }\n        }\n    }\n\n    function normalize(name, baseName) {\n        var baseParts;\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === '.') {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                baseParts = baseName.split('/');\n                baseParts = baseParts.slice(0, baseParts.length - 1);\n                baseParts = baseParts.concat(name.split('/'));\n                trimDots(baseParts);\n                name = baseParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    /**\n     * Create the normalize() function passed to a loader plugin's\n     * normalize method.\n     */\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(id) {\n        function load(value) {\n            loaderCache[id] = value;\n        }\n\n        load.fromText = function (id, text) {\n            //This one is difficult because the text can/probably uses\n            //define, and any relative paths and requires should be relative\n            //to that id was it would be found on disk. But this would require\n            //bootstrapping a module/require fairly deeply from node core.\n            //Not sure how best to go about that yet.\n            throw new Error('amdefine does not implement load.fromText');\n        };\n\n        return load;\n    }\n\n    makeRequire = function (systemRequire, exports, module, relId) {\n        function amdRequire(deps, callback) {\n            if (typeof deps === 'string') {\n                //Synchronous, single module require('')\n                return stringRequire(systemRequire, exports, module, deps, relId);\n            } else {\n                //Array of dependencies with a callback.\n\n                //Convert the dependencies to modules.\n                deps = deps.map(function (depName) {\n                    return stringRequire(systemRequire, exports, module, depName, relId);\n                });\n\n                //Wait for next tick to call back the require call.\n                if (callback) {\n                    process.nextTick(function () {\n                        callback.apply(null, deps);\n                    });\n                }\n            }\n        }\n\n        amdRequire.toUrl = function (filePath) {\n            if (filePath.indexOf('.') === 0) {\n                return normalize(filePath, path.dirname(module.filename));\n            } else {\n                return filePath;\n            }\n        };\n\n        return amdRequire;\n    };\n\n    //Favor explicit value, passed in if the module wants to support Node 0.4.\n    requireFn = requireFn || function req() {\n        return module.require.apply(module, arguments);\n    };\n\n    function runFactory(id, deps, factory) {\n        var r, e, m, result;\n\n        if (id) {\n            e = loaderCache[id] = {};\n            m = {\n                id: id,\n                uri: __filename,\n                exports: e\n            };\n            r = makeRequire(requireFn, e, m, id);\n        } else {\n            //Only support one define call per file\n            if (alreadyCalled) {\n                throw new Error('amdefine with no module ID cannot be called more than once per file.');\n            }\n            alreadyCalled = true;\n\n            //Use the real variables from node\n            //Use module.exports for exports, since\n            //the exports in here is amdefine exports.\n            e = module.exports;\n            m = module;\n            r = makeRequire(requireFn, e, m, module.id);\n        }\n\n        //If there are dependencies, they are strings, so need\n        //to convert them to dependency values.\n        if (deps) {\n            deps = deps.map(function (depName) {\n                return r(depName);\n            });\n        }\n\n        //Call the factory with the right dependencies.\n        if (typeof factory === 'function') {\n            result = factory.apply(m.exports, deps);\n        } else {\n            result = factory;\n        }\n\n        if (result !== undefined) {\n            m.exports = result;\n            if (id) {\n                loaderCache[id] = m.exports;\n            }\n        }\n    }\n\n    stringRequire = function (systemRequire, exports, module, id, relId) {\n        //Split the ID by a ! so that\n        var index = id.indexOf('!'),\n            originalId = id,\n            prefix, plugin;\n\n        if (index === -1) {\n            id = normalize(id, relId);\n\n            //Straight module lookup. If it is one of the special dependencies,\n            //deal with it, otherwise, delegate to node.\n            if (id === 'require') {\n                return makeRequire(systemRequire, exports, module, relId);\n            } else if (id === 'exports') {\n                return exports;\n            } else if (id === 'module') {\n                return module;\n            } else if (loaderCache.hasOwnProperty(id)) {\n                return loaderCache[id];\n            } else if (defineCache[id]) {\n                runFactory.apply(null, defineCache[id]);\n                return loaderCache[id];\n            } else {\n                if(systemRequire) {\n                    return systemRequire(originalId);\n                } else {\n                    throw new Error('No module with ID: ' + id);\n                }\n            }\n        } else {\n            //There is a plugin in play.\n            prefix = id.substring(0, index);\n            id = id.substring(index + 1, id.length);\n\n            plugin = stringRequire(systemRequire, exports, module, prefix, relId);\n\n            if (plugin.normalize) {\n                id = plugin.normalize(id, makeNormalize(relId));\n            } else {\n                //Normalize the ID normally.\n                id = normalize(id, relId);\n            }\n\n            if (loaderCache[id]) {\n                return loaderCache[id];\n            } else {\n                plugin.load(id, makeRequire(systemRequire, exports, module, relId), makeLoad(id), {});\n\n                return loaderCache[id];\n            }\n        }\n    };\n\n    //Create a define function specific to the module asking for amdefine.\n    function define(id, deps, factory) {\n        if (Array.isArray(id)) {\n            factory = deps;\n            deps = id;\n            id = undefined;\n        } else if (typeof id !== 'string') {\n            factory = id;\n            id = deps = undefined;\n        }\n\n        if (deps && !Array.isArray(deps)) {\n            factory = deps;\n            deps = undefined;\n        }\n\n        if (!deps) {\n            deps = ['require', 'exports', 'module'];\n        }\n\n        //Set up properties for this module. If an ID, then use\n        //internal cache. If no ID, then use the external variables\n        //for this node module.\n        if (id) {\n            //Put the module in deep freeze until there is a\n            //require call for it.\n            defineCache[id] = [id, deps, factory];\n        } else {\n            runFactory(id, deps, factory);\n        }\n    }\n\n    //define.require, which has access to all the values in the\n    //cache. Useful for AMD modules that all have IDs in the file,\n    //but need to finally export a value to node based on one of those\n    //IDs.\n    define.require = function (id) {\n        if (loaderCache[id]) {\n            return loaderCache[id];\n        }\n\n        if (defineCache[id]) {\n            runFactory.apply(null, defineCache[id]);\n            return loaderCache[id];\n        }\n    };\n\n    define.amd = {};\n\n    return define;\n}\n\nmodule.exports = amdefine;\n\n}).call(this,require('_process'),\"/node_modules/amdefine/amdefine.js\")\n\n},{\"_process\":4,\"path\":3}],2:[function(require,module,exports){\n'use strict';\n\n/**\n * Color Contast Checker\n * An accessibility checker tool for validating the color contrast based on WCAG 2.0 standard.\n * var ccc = new ColorContrastChecker();\n\n * var color1 = \"#FFFFFF\";\n * var color2 = \"#000000;\n\n * if (ccc.isLevelAA(color1, color2, 14)) {\n *     alert(\"Valid Level AA\");\n * } else {\n *     alert(\"Invalid Contrast\");\n * }\n */\n\nvar amdefine = false;\nif (typeof define !== 'function')\n    var define = require('amdefine')(module, require),\n        amdefine = true;\n\ndefine(function (require, exports, module) {\n\n    var ColorContrastChecker = function() {};\n\n    ColorContrastChecker.prototype = {\n        fontSize: 14,\n        rgbClass : {\n            toString: function() {\n                return '<r: ' + this.r +\n                    ' g: ' + this.g +\n                    ' b: ' + this.b +\n                    ' >';\n            }\n        },\n        isValidSixDigitColorCode: function (hex){\n            var regSixDigitColorcode = /^(#)?([0-9a-fA-F]{6})([0-9a-fA-F]{6})?$/;\n            return regSixDigitColorcode.test(hex);\n        },\n        isValidThreeDigitColorCode: function (hex){\n            var regThreeDigitColorcode = /^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/;\n            return regThreeDigitColorcode.test(hex);\n        },\n        isValidColorCode : function (hex){\n            return this.isValidSixDigitColorCode(hex) || this.isValidThreeDigitColorCode(hex);\n        },\n        convertColorToSixDigit: function (hex) {\n          return '#' + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3];\n        },\n        hexToLuminance: function (color) {\n            if (!this.isValidColorCode(color)) {\n                throw new Error(\"Invalid Color :\" + color);\n            }\n\n            if (this.isValidThreeDigitColorCode(color)) {\n              color = this.convertColorToSixDigit(color);\n            }\n\n            color = this.getRGBFromHex(color);\n\n            var LRGB = this.calculateLRGB(color);\n\n            return this.calculateLuminance(LRGB);\n        },\n        check: function (colorA, colorB, fontSize) {\n            if (typeof fontSize !== 'undefined') {\n                this.fontSize = fontSize;\n            }\n\n            if(!colorA || !colorB) {\n                return false;\n            }\n\n            var l1 = this.hexToLuminance(colorA); /* higher value */\n            var l2 = this.hexToLuminance(colorB); /* lower value */\n            var contrastRatio = this.getContrastRatio(l1, l2);\n\n            return this.verifyContrastRatio(contrastRatio);\n        },\n        checkPairs: function (pairs) {\n            var results = [];\n\n            for (var i in pairs) {\n                var pair = pairs[i];\n                if (typeof pair.fontSize !== 'undefined') {\n                    results.push(\n                        this.check(\n                            pair.colorA,\n                            pair.colorB,\n                            pair.fontSize\n                        )\n                    );\n                } else {\n                    results.push(\n                        this.check(\n                            pair.colorA,\n                            pair.colorB\n                        )\n                    );\n                }\n            }\n            return results;\n        },\n        calculateLuminance: function(lRGB) {\n            return (0.2126 * lRGB.r) + (0.7152 * lRGB.g) + (0.0722 * lRGB.b);\n        },\n        isLevelAA : function(colorA, colorB, fontSize) {\n            var result = this.check(colorA, colorB, fontSize);\n            return result.WCAG_AA;\n        },\n        isLevelAAA : function(colorA, colorB, fontSize) {\n            var result = this.check(colorA, colorB, fontSize);\n            return result.WCAG_AAA;\n        },\n        getRGBFromHex : function(color) {\n\n            var rgb = Object.create(this.rgbClass),\n                rVal,\n                gVal,\n                bVal;\n\n            if (typeof color !== 'string') {\n                throw new Error('must use string');\n            }\n\n            rVal = parseInt(color.slice(1, 3), 16);\n            gVal = parseInt(color.slice(3, 5), 16);\n            bVal = parseInt(color.slice(5, 7), 16);\n\n            rgb.r = rVal;\n            rgb.g = gVal;\n            rgb.b = bVal;\n\n            return rgb;\n        },\n        calculateSRGB : function(rgb) {\n            var sRGB = Object.create(this.rgbClass),\n                key;\n\n            for (key in rgb) {\n                if (rgb.hasOwnProperty(key)) {\n                    sRGB[key] = parseFloat((rgb[key] / 255), 10);\n                }\n            }\n\n            return sRGB;\n        },\n        calculateLRGB: function (rgb) {\n            var sRGB = this.calculateSRGB(rgb);\n            var lRGB = Object.create(this.rgbClass),\n                key,\n                val = 0;\n\n            for (key in sRGB) {\n                if (sRGB.hasOwnProperty(key)) {\n                    val = parseFloat(sRGB[key], 10);\n                    if (val <= 0.03928) {\n                        lRGB[key] = (val / 12.92);\n                    } else {\n                        lRGB[key] = Math.pow(((val + 0.055) / 1.055), 2.4);\n                    }\n                }\n            }\n\n            return lRGB;\n        },\n        getContrastRatio : function(lumA, lumB) {\n            var ratio,\n                lighter,\n                darker;\n\n            if (lumA >= lumB) {\n                lighter = lumA;\n                darker = lumB;\n            } else {\n                lighter = lumB;\n                darker = lumA;\n            }\n\n            ratio = (lighter + 0.05) / (darker + 0.05);\n\n            return ratio;\n        },\n        verifyContrastRatio : function(ratio) {\n\n\n            var resultsClass = {\n                toString: function() {\n                    return '< WCAG-AA: ' + ((this.WCAG_AA) ? 'pass' : 'fail') +\n                        ' WCAG-AAA: ' + ((this.WCAG_AAA) ? 'pass' : 'fail') +\n                        ' >';\n                }\n            };\n            var WCAG_REQ_RATIO_AA_LG = 3.0,\n                WCAG_REQ_RATIO_AA_SM = 4.5,\n                WCAG_REQ_RATIO_AAA_LG = 4.5,\n                WCAG_REQ_RATIO_AAA_SM = 7.0,\n                WCAG_FONT_CUTOFF = 18;\n\n            var results = Object.create(resultsClass),\n                fontSize = this.fontSize || 14;\n\n            if (fontSize >= WCAG_FONT_CUTOFF) {\n                results.WCAG_AA = (ratio >= WCAG_REQ_RATIO_AA_LG);\n                results.WCAG_AAA = (ratio >= WCAG_REQ_RATIO_AAA_LG);\n            } else {\n                results.WCAG_AA = (ratio >= WCAG_REQ_RATIO_AA_SM);\n                results.WCAG_AAA = (ratio >= WCAG_REQ_RATIO_AAA_SM);\n            }\n\n            return results;\n        }\n\n    };\n\n    return ColorContrastChecker;\n});\n\n},{\"amdefine\":1}],3:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n}).call(this,require('_process'))\n\n},{\"_process\":4}],4:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],5:[function(require,module,exports){\n/**\n * A11y color fieldtype plugin for Craft CMS\n *\n * A11ycolor Field JS\n *\n * @author    Iain Bean\n * @copyright Copyright (c) 2018 Iain Bean\n * @link      https://iainbean.com\n * @package   A11yColorFieldtype\n * @since     1.0.0A11yColorFieldtypeA11ycolor\n */\n\nvar ColorContrastChecker = require('color-contrast-checker');\n\n(function ($, window, document, undefined) {\n  var pluginName = 'A11yColorField';\n  var defaults = {};\n\n  // Plugin constructor\n  function Plugin(element, options) {\n    this.element = element;\n\n    this.options = $.extend({}, defaults, options);\n\n    this._defaults = defaults;\n    this._name = pluginName;\n\n    this.init();\n  }\n\n  Plugin.prototype = {\n    init: function (id) {\n      var _this = this;\n\n      this.colorContrastChecker = new ColorContrastChecker();\n\n      $(function () {\n        var $colorFieldContainer = $(_this.element);\n\n        _this.$colorField = $colorFieldContainer.find('[name=\"fields[' + _this.options.id + ']\"]');\n\n        // Add event listener\n        _this.$colorField.on('input', $.proxy(_this.updateColorContrast, _this));\n      });\n    },\n\n    updateColorContrast: function () {\n      var contrastColor = this.options.contrastColor;\n      var fieldColor = this.$colorField[0].value;\n      var fontSize = 14;\n\n      // Check if this is a valid 3 or 6 character hex code\n      if (this.colorContrastChecker.isValidColorCode(fieldColor)) {\n        // Get the ratio\n        var l1 = this.colorContrastChecker.hexToLuminance(contrastColor); /* higher value */\n        var l2 = this.colorContrastChecker.hexToLuminance(fieldColor); /* lower value */\n        var contrastRatio = this.colorContrastChecker.getContrastRatio(l1, l2);\n        // Is it valid?\n        console.log(this.colorContrastChecker.check(contrastColor, fieldColor, fontSize));\n      } else {\n        console.log('Invalid Hex');\n      }\n    }\n  };\n\n  // A really lightweight plugin wrapper around the constructor,\n  // preventing against multiple instantiations\n  $.fn[pluginName] = function (options) {\n    return this.each(function () {\n      if (!$.data(this, 'plugin_' + pluginName)) {\n        $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n      }\n    });\n  };\n})(jQuery, window, document);\n\n},{\"color-contrast-checker\":2}]},{},[5])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYW1kZWZpbmUvYW1kZWZpbmUuanMiLCJub2RlX21vZHVsZXMvY29sb3ItY29udHJhc3QtY2hlY2tlci9zcmMvY29sb3ItY29udHJhc3QtY2hlY2tlci5qcyIsIm5vZGVfbW9kdWxlcy9wYXRoLWJyb3dzZXJpZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwic3JjL2Fzc2V0YnVuZGxlcy9hMTF5Y29sb3JmaWVsZC9zcmMvanMvQTExeWNvbG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM3U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDaE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBOzs7Ozs7Ozs7Ozs7QUFZQSxJQUFJLHVCQUF1QixRQUFRLHdCQUFSLENBQTNCOztBQUVBLENBQUMsVUFBVSxDQUFWLEVBQWEsTUFBYixFQUFxQixRQUFyQixFQUErQixTQUEvQixFQUEwQztBQUN6QyxNQUFJLGFBQWEsZ0JBQWpCO0FBQ0EsTUFBSSxXQUFXLEVBQWY7O0FBRUE7QUFDQSxXQUFTLE1BQVQsQ0FBaUIsT0FBakIsRUFBMEIsT0FBMUIsRUFBbUM7QUFDakMsU0FBSyxPQUFMLEdBQWUsT0FBZjs7QUFFQSxTQUFLLE9BQUwsR0FBZSxFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsUUFBYixFQUF1QixPQUF2QixDQUFmOztBQUVBLFNBQUssU0FBTCxHQUFpQixRQUFqQjtBQUNBLFNBQUssS0FBTCxHQUFhLFVBQWI7O0FBRUEsU0FBSyxJQUFMO0FBQ0Q7O0FBRUQsU0FBTyxTQUFQLEdBQW1CO0FBQ2pCLFVBQU0sVUFBVSxFQUFWLEVBQWM7QUFDbEIsVUFBSSxRQUFRLElBQVo7O0FBRUEsV0FBSyxvQkFBTCxHQUE0QixJQUFJLG9CQUFKLEVBQTVCOztBQUVBLFFBQUUsWUFBWTtBQUNaLFlBQUksdUJBQXVCLEVBQUUsTUFBTSxPQUFSLENBQTNCOztBQUVBLGNBQU0sV0FBTixHQUFvQixxQkFDakIsSUFEaUIsQ0FDWixtQkFBbUIsTUFBTSxPQUFOLENBQWMsRUFBakMsR0FBc0MsS0FEMUIsQ0FBcEI7O0FBR0E7QUFDQSxjQUFNLFdBQU4sQ0FBa0IsRUFBbEIsQ0FBcUIsT0FBckIsRUFBOEIsRUFBRSxLQUFGLENBQVEsTUFBTSxtQkFBZCxFQUFtQyxLQUFuQyxDQUE5QjtBQUNELE9BUkQ7QUFTRCxLQWZnQjs7QUFpQmpCLHlCQUFxQixZQUFZO0FBQy9CLFVBQUksZ0JBQWdCLEtBQUssT0FBTCxDQUFhLGFBQWpDO0FBQ0EsVUFBSSxhQUFhLEtBQUssV0FBTCxDQUFpQixDQUFqQixFQUFvQixLQUFyQztBQUNBLFVBQUksV0FBVyxFQUFmOztBQUVBO0FBQ0EsVUFBSSxLQUFLLG9CQUFMLENBQTBCLGdCQUExQixDQUEyQyxVQUEzQyxDQUFKLEVBQTREO0FBQzFEO0FBQ0EsWUFBSSxLQUFLLEtBQUssb0JBQUwsQ0FBMEIsY0FBMUIsQ0FBeUMsYUFBekMsQ0FBVCxDQUYwRCxDQUVRO0FBQ2xFLFlBQUksS0FBSyxLQUFLLG9CQUFMLENBQTBCLGNBQTFCLENBQXlDLFVBQXpDLENBQVQsQ0FIMEQsQ0FHSztBQUMvRCxZQUFJLGdCQUFnQixLQUFLLG9CQUFMLENBQTBCLGdCQUExQixDQUEyQyxFQUEzQyxFQUErQyxFQUEvQyxDQUFwQjtBQUNBO0FBQ0EsZ0JBQVEsR0FBUixDQUFZLEtBQUssb0JBQUwsQ0FBMEIsS0FBMUIsQ0FBZ0MsYUFBaEMsRUFBK0MsVUFBL0MsRUFBMkQsUUFBM0QsQ0FBWjtBQUNELE9BUEQsTUFPTztBQUNMLGdCQUFRLEdBQVIsQ0FBWSxhQUFaO0FBQ0Q7QUFDRjtBQWpDZ0IsR0FBbkI7O0FBb0NBO0FBQ0E7QUFDQSxJQUFFLEVBQUYsQ0FBSyxVQUFMLElBQW1CLFVBQVUsT0FBVixFQUFtQjtBQUNwQyxXQUFPLEtBQUssSUFBTCxDQUFVLFlBQVk7QUFDM0IsVUFBSSxDQUFDLEVBQUUsSUFBRixDQUFPLElBQVAsRUFBYSxZQUFZLFVBQXpCLENBQUwsRUFBMkM7QUFDekMsVUFBRSxJQUFGLENBQU8sSUFBUCxFQUFhLFlBQVksVUFBekIsRUFDRSxJQUFJLE1BQUosQ0FBVyxJQUFYLEVBQWlCLE9BQWpCLENBREY7QUFFRDtBQUNGLEtBTE0sQ0FBUDtBQU1ELEdBUEQ7QUFRRCxDQTlERCxFQThERyxNQTlESCxFQThEVyxNQTlEWCxFQThEbUIsUUE5RG5CIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc31yZXR1cm4gZX0pKCkiLCIvKiogdmltOiBldDp0cz00OnN3PTQ6c3RzPTRcbiAqIEBsaWNlbnNlIGFtZGVmaW5lIDEuMC4xIENvcHlyaWdodCAoYykgMjAxMS0yMDE2LCBUaGUgRG9qbyBGb3VuZGF0aW9uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBBdmFpbGFibGUgdmlhIHRoZSBNSVQgb3IgbmV3IEJTRCBsaWNlbnNlLlxuICogc2VlOiBodHRwOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL2FtZGVmaW5lIGZvciBkZXRhaWxzXG4gKi9cblxuLypqc2xpbnQgbm9kZTogdHJ1ZSAqL1xuLypnbG9iYWwgbW9kdWxlLCBwcm9jZXNzICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlZmluZSBmb3Igbm9kZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtb2R1bGUgdGhlIFwibW9kdWxlXCIgb2JqZWN0IHRoYXQgaXMgZGVmaW5lZCBieSBOb2RlIGZvciB0aGVcbiAqIGN1cnJlbnQgbW9kdWxlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3JlcXVpcmVGbl0uIE5vZGUncyByZXF1aXJlIGZ1bmN0aW9uIGZvciB0aGUgY3VycmVudCBtb2R1bGUuXG4gKiBJdCBvbmx5IG5lZWRzIHRvIGJlIHBhc3NlZCBpbiBOb2RlIHZlcnNpb25zIGJlZm9yZSAwLjUsIHdoZW4gbW9kdWxlLnJlcXVpcmVcbiAqIGRpZCBub3QgZXhpc3QuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgZGVmaW5lIGZ1bmN0aW9uIHRoYXQgaXMgdXNhYmxlIGZvciB0aGUgY3VycmVudCBub2RlXG4gKiBtb2R1bGUuXG4gKi9cbmZ1bmN0aW9uIGFtZGVmaW5lKG1vZHVsZSwgcmVxdWlyZUZuKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBkZWZpbmVDYWNoZSA9IHt9LFxuICAgICAgICBsb2FkZXJDYWNoZSA9IHt9LFxuICAgICAgICBhbHJlYWR5Q2FsbGVkID0gZmFsc2UsXG4gICAgICAgIHBhdGggPSByZXF1aXJlKCdwYXRoJyksXG4gICAgICAgIG1ha2VSZXF1aXJlLCBzdHJpbmdSZXF1aXJlO1xuXG4gICAgLyoqXG4gICAgICogVHJpbXMgdGhlIC4gYW5kIC4uIGZyb20gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgICAgKiBJdCB3aWxsIGtlZXAgYSBsZWFkaW5nIHBhdGggc2VnbWVudCBpZiBhIC4uIHdpbGwgYmVjb21lXG4gICAgICogdGhlIGZpcnN0IHBhdGggc2VnbWVudCwgdG8gaGVscCB3aXRoIG1vZHVsZSBuYW1lIGxvb2t1cHMsXG4gICAgICogd2hpY2ggYWN0IGxpa2UgcGF0aHMsIGJ1dCBjYW4gYmUgcmVtYXBwZWQuIEJ1dCB0aGUgZW5kIHJlc3VsdCxcbiAgICAgKiBhbGwgcGF0aHMgdGhhdCB1c2UgdGhpcyBmdW5jdGlvbiBzaG91bGQgbG9vayBub3JtYWxpemVkLlxuICAgICAqIE5PVEU6IHRoaXMgbWV0aG9kIE1PRElGSUVTIHRoZSBpbnB1dCBhcnJheS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnkgdGhlIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJpbURvdHMoYXJ5KSB7XG4gICAgICAgIHZhciBpLCBwYXJ0O1xuICAgICAgICBmb3IgKGkgPSAwOyBhcnlbaV07IGkrPSAxKSB7XG4gICAgICAgICAgICBwYXJ0ID0gYXJ5W2ldO1xuICAgICAgICAgICAgaWYgKHBhcnQgPT09ICcuJykge1xuICAgICAgICAgICAgICAgIGFyeS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgaSAtPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0ID09PSAnLi4nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDEgJiYgKGFyeVsyXSA9PT0gJy4uJyB8fCBhcnlbMF0gPT09ICcuLicpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRW5kIG9mIHRoZSBsaW5lLiBLZWVwIGF0IGxlYXN0IG9uZSBub24tZG90XG4gICAgICAgICAgICAgICAgICAgIC8vcGF0aCBzZWdtZW50IGF0IHRoZSBmcm9udCBzbyBpdCBjYW4gYmUgbWFwcGVkXG4gICAgICAgICAgICAgICAgICAgIC8vY29ycmVjdGx5IHRvIGRpc2suIE90aGVyd2lzZSwgdGhlcmUgaXMgbGlrZWx5XG4gICAgICAgICAgICAgICAgICAgIC8vbm8gcGF0aCBtYXBwaW5nIGZvciBhIHBhdGggc3RhcnRpbmcgd2l0aCAnLi4nLlxuICAgICAgICAgICAgICAgICAgICAvL1RoaXMgY2FuIHN0aWxsIGZhaWwsIGJ1dCBjYXRjaGVzIHRoZSBtb3N0IHJlYXNvbmFibGVcbiAgICAgICAgICAgICAgICAgICAgLy91c2VzIG9mIC4uXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXJ5LnNwbGljZShpIC0gMSwgMik7XG4gICAgICAgICAgICAgICAgICAgIGkgLT0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemUobmFtZSwgYmFzZU5hbWUpIHtcbiAgICAgICAgdmFyIGJhc2VQYXJ0cztcblxuICAgICAgICAvL0FkanVzdCBhbnkgcmVsYXRpdmUgcGF0aHMuXG4gICAgICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApID09PSAnLicpIHtcbiAgICAgICAgICAgIC8vSWYgaGF2ZSBhIGJhc2UgbmFtZSwgdHJ5IHRvIG5vcm1hbGl6ZSBhZ2FpbnN0IGl0LFxuICAgICAgICAgICAgLy9vdGhlcndpc2UsIGFzc3VtZSBpdCBpcyBhIHRvcC1sZXZlbCByZXF1aXJlIHRoYXQgd2lsbFxuICAgICAgICAgICAgLy9iZSByZWxhdGl2ZSB0byBiYXNlVXJsIGluIHRoZSBlbmQuXG4gICAgICAgICAgICBpZiAoYmFzZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBiYXNlUGFydHMgPSBiYXNlTmFtZS5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgIGJhc2VQYXJ0cyA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgYmFzZVBhcnRzID0gYmFzZVBhcnRzLmNvbmNhdChuYW1lLnNwbGl0KCcvJykpO1xuICAgICAgICAgICAgICAgIHRyaW1Eb3RzKGJhc2VQYXJ0cyk7XG4gICAgICAgICAgICAgICAgbmFtZSA9IGJhc2VQYXJ0cy5qb2luKCcvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIG5vcm1hbGl6ZSgpIGZ1bmN0aW9uIHBhc3NlZCB0byBhIGxvYWRlciBwbHVnaW4nc1xuICAgICAqIG5vcm1hbGl6ZSBtZXRob2QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZU5vcm1hbGl6ZShyZWxOYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShuYW1lLCByZWxOYW1lKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlTG9hZChpZCkge1xuICAgICAgICBmdW5jdGlvbiBsb2FkKHZhbHVlKSB7XG4gICAgICAgICAgICBsb2FkZXJDYWNoZVtpZF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvYWQuZnJvbVRleHQgPSBmdW5jdGlvbiAoaWQsIHRleHQpIHtcbiAgICAgICAgICAgIC8vVGhpcyBvbmUgaXMgZGlmZmljdWx0IGJlY2F1c2UgdGhlIHRleHQgY2FuL3Byb2JhYmx5IHVzZXNcbiAgICAgICAgICAgIC8vZGVmaW5lLCBhbmQgYW55IHJlbGF0aXZlIHBhdGhzIGFuZCByZXF1aXJlcyBzaG91bGQgYmUgcmVsYXRpdmVcbiAgICAgICAgICAgIC8vdG8gdGhhdCBpZCB3YXMgaXQgd291bGQgYmUgZm91bmQgb24gZGlzay4gQnV0IHRoaXMgd291bGQgcmVxdWlyZVxuICAgICAgICAgICAgLy9ib290c3RyYXBwaW5nIGEgbW9kdWxlL3JlcXVpcmUgZmFpcmx5IGRlZXBseSBmcm9tIG5vZGUgY29yZS5cbiAgICAgICAgICAgIC8vTm90IHN1cmUgaG93IGJlc3QgdG8gZ28gYWJvdXQgdGhhdCB5ZXQuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FtZGVmaW5lIGRvZXMgbm90IGltcGxlbWVudCBsb2FkLmZyb21UZXh0Jyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGxvYWQ7XG4gICAgfVxuXG4gICAgbWFrZVJlcXVpcmUgPSBmdW5jdGlvbiAoc3lzdGVtUmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlLCByZWxJZCkge1xuICAgICAgICBmdW5jdGlvbiBhbWRSZXF1aXJlKGRlcHMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlcHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy9TeW5jaHJvbm91cywgc2luZ2xlIG1vZHVsZSByZXF1aXJlKCcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmdSZXF1aXJlKHN5c3RlbVJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSwgZGVwcywgcmVsSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL0FycmF5IG9mIGRlcGVuZGVuY2llcyB3aXRoIGEgY2FsbGJhY2suXG5cbiAgICAgICAgICAgICAgICAvL0NvbnZlcnQgdGhlIGRlcGVuZGVuY2llcyB0byBtb2R1bGVzLlxuICAgICAgICAgICAgICAgIGRlcHMgPSBkZXBzLm1hcChmdW5jdGlvbiAoZGVwTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nUmVxdWlyZShzeXN0ZW1SZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUsIGRlcE5hbWUsIHJlbElkKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vV2FpdCBmb3IgbmV4dCB0aWNrIHRvIGNhbGwgYmFjayB0aGUgcmVxdWlyZSBjYWxsLlxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGRlcHMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhbWRSZXF1aXJlLnRvVXJsID0gZnVuY3Rpb24gKGZpbGVQYXRoKSB7XG4gICAgICAgICAgICBpZiAoZmlsZVBhdGguaW5kZXhPZignLicpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShmaWxlUGF0aCwgcGF0aC5kaXJuYW1lKG1vZHVsZS5maWxlbmFtZSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGFtZFJlcXVpcmU7XG4gICAgfTtcblxuICAgIC8vRmF2b3IgZXhwbGljaXQgdmFsdWUsIHBhc3NlZCBpbiBpZiB0aGUgbW9kdWxlIHdhbnRzIHRvIHN1cHBvcnQgTm9kZSAwLjQuXG4gICAgcmVxdWlyZUZuID0gcmVxdWlyZUZuIHx8IGZ1bmN0aW9uIHJlcSgpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZS5yZXF1aXJlLmFwcGx5KG1vZHVsZSwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcnVuRmFjdG9yeShpZCwgZGVwcywgZmFjdG9yeSkge1xuICAgICAgICB2YXIgciwgZSwgbSwgcmVzdWx0O1xuXG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgZSA9IGxvYWRlckNhY2hlW2lkXSA9IHt9O1xuICAgICAgICAgICAgbSA9IHtcbiAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgdXJpOiBfX2ZpbGVuYW1lLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByID0gbWFrZVJlcXVpcmUocmVxdWlyZUZuLCBlLCBtLCBpZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL09ubHkgc3VwcG9ydCBvbmUgZGVmaW5lIGNhbGwgcGVyIGZpbGVcbiAgICAgICAgICAgIGlmIChhbHJlYWR5Q2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhbWRlZmluZSB3aXRoIG5vIG1vZHVsZSBJRCBjYW5ub3QgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHBlciBmaWxlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxyZWFkeUNhbGxlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vVXNlIHRoZSByZWFsIHZhcmlhYmxlcyBmcm9tIG5vZGVcbiAgICAgICAgICAgIC8vVXNlIG1vZHVsZS5leHBvcnRzIGZvciBleHBvcnRzLCBzaW5jZVxuICAgICAgICAgICAgLy90aGUgZXhwb3J0cyBpbiBoZXJlIGlzIGFtZGVmaW5lIGV4cG9ydHMuXG4gICAgICAgICAgICBlID0gbW9kdWxlLmV4cG9ydHM7XG4gICAgICAgICAgICBtID0gbW9kdWxlO1xuICAgICAgICAgICAgciA9IG1ha2VSZXF1aXJlKHJlcXVpcmVGbiwgZSwgbSwgbW9kdWxlLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vSWYgdGhlcmUgYXJlIGRlcGVuZGVuY2llcywgdGhleSBhcmUgc3RyaW5ncywgc28gbmVlZFxuICAgICAgICAvL3RvIGNvbnZlcnQgdGhlbSB0byBkZXBlbmRlbmN5IHZhbHVlcy5cbiAgICAgICAgaWYgKGRlcHMpIHtcbiAgICAgICAgICAgIGRlcHMgPSBkZXBzLm1hcChmdW5jdGlvbiAoZGVwTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByKGRlcE5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL0NhbGwgdGhlIGZhY3Rvcnkgd2l0aCB0aGUgcmlnaHQgZGVwZW5kZW5jaWVzLlxuICAgICAgICBpZiAodHlwZW9mIGZhY3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhY3RvcnkuYXBwbHkobS5leHBvcnRzLCBkZXBzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhY3Rvcnk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG0uZXhwb3J0cyA9IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgIGxvYWRlckNhY2hlW2lkXSA9IG0uZXhwb3J0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0cmluZ1JlcXVpcmUgPSBmdW5jdGlvbiAoc3lzdGVtUmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlLCBpZCwgcmVsSWQpIHtcbiAgICAgICAgLy9TcGxpdCB0aGUgSUQgYnkgYSAhIHNvIHRoYXRcbiAgICAgICAgdmFyIGluZGV4ID0gaWQuaW5kZXhPZignIScpLFxuICAgICAgICAgICAgb3JpZ2luYWxJZCA9IGlkLFxuICAgICAgICAgICAgcHJlZml4LCBwbHVnaW47XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgaWQgPSBub3JtYWxpemUoaWQsIHJlbElkKTtcblxuICAgICAgICAgICAgLy9TdHJhaWdodCBtb2R1bGUgbG9va3VwLiBJZiBpdCBpcyBvbmUgb2YgdGhlIHNwZWNpYWwgZGVwZW5kZW5jaWVzLFxuICAgICAgICAgICAgLy9kZWFsIHdpdGggaXQsIG90aGVyd2lzZSwgZGVsZWdhdGUgdG8gbm9kZS5cbiAgICAgICAgICAgIGlmIChpZCA9PT0gJ3JlcXVpcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSZXF1aXJlKHN5c3RlbVJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSwgcmVsSWQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpZCA9PT0gJ2V4cG9ydHMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlkID09PSAnbW9kdWxlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2R1bGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvYWRlckNhY2hlLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkZXJDYWNoZVtpZF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlZmluZUNhY2hlW2lkXSkge1xuICAgICAgICAgICAgICAgIHJ1bkZhY3RvcnkuYXBwbHkobnVsbCwgZGVmaW5lQ2FjaGVbaWRdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZGVyQ2FjaGVbaWRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZihzeXN0ZW1SZXF1aXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzeXN0ZW1SZXF1aXJlKG9yaWdpbmFsSWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbW9kdWxlIHdpdGggSUQ6ICcgKyBpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9UaGVyZSBpcyBhIHBsdWdpbiBpbiBwbGF5LlxuICAgICAgICAgICAgcHJlZml4ID0gaWQuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgIGlkID0gaWQuc3Vic3RyaW5nKGluZGV4ICsgMSwgaWQubGVuZ3RoKTtcblxuICAgICAgICAgICAgcGx1Z2luID0gc3RyaW5nUmVxdWlyZShzeXN0ZW1SZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUsIHByZWZpeCwgcmVsSWQpO1xuXG4gICAgICAgICAgICBpZiAocGx1Z2luLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgIGlkID0gcGx1Z2luLm5vcm1hbGl6ZShpZCwgbWFrZU5vcm1hbGl6ZShyZWxJZCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSB0aGUgSUQgbm9ybWFsbHkuXG4gICAgICAgICAgICAgICAgaWQgPSBub3JtYWxpemUoaWQsIHJlbElkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxvYWRlckNhY2hlW2lkXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkZXJDYWNoZVtpZF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKGlkLCBtYWtlUmVxdWlyZShzeXN0ZW1SZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUsIHJlbElkKSwgbWFrZUxvYWQoaWQpLCB7fSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZGVyQ2FjaGVbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vQ3JlYXRlIGEgZGVmaW5lIGZ1bmN0aW9uIHNwZWNpZmljIHRvIHRoZSBtb2R1bGUgYXNraW5nIGZvciBhbWRlZmluZS5cbiAgICBmdW5jdGlvbiBkZWZpbmUoaWQsIGRlcHMsIGZhY3RvcnkpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaWQpKSB7XG4gICAgICAgICAgICBmYWN0b3J5ID0gZGVwcztcbiAgICAgICAgICAgIGRlcHMgPSBpZDtcbiAgICAgICAgICAgIGlkID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGZhY3RvcnkgPSBpZDtcbiAgICAgICAgICAgIGlkID0gZGVwcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZXBzICYmICFBcnJheS5pc0FycmF5KGRlcHMpKSB7XG4gICAgICAgICAgICBmYWN0b3J5ID0gZGVwcztcbiAgICAgICAgICAgIGRlcHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRlcHMpIHtcbiAgICAgICAgICAgIGRlcHMgPSBbJ3JlcXVpcmUnLCAnZXhwb3J0cycsICdtb2R1bGUnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vU2V0IHVwIHByb3BlcnRpZXMgZm9yIHRoaXMgbW9kdWxlLiBJZiBhbiBJRCwgdGhlbiB1c2VcbiAgICAgICAgLy9pbnRlcm5hbCBjYWNoZS4gSWYgbm8gSUQsIHRoZW4gdXNlIHRoZSBleHRlcm5hbCB2YXJpYWJsZXNcbiAgICAgICAgLy9mb3IgdGhpcyBub2RlIG1vZHVsZS5cbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAvL1B1dCB0aGUgbW9kdWxlIGluIGRlZXAgZnJlZXplIHVudGlsIHRoZXJlIGlzIGFcbiAgICAgICAgICAgIC8vcmVxdWlyZSBjYWxsIGZvciBpdC5cbiAgICAgICAgICAgIGRlZmluZUNhY2hlW2lkXSA9IFtpZCwgZGVwcywgZmFjdG9yeV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBydW5GYWN0b3J5KGlkLCBkZXBzLCBmYWN0b3J5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vZGVmaW5lLnJlcXVpcmUsIHdoaWNoIGhhcyBhY2Nlc3MgdG8gYWxsIHRoZSB2YWx1ZXMgaW4gdGhlXG4gICAgLy9jYWNoZS4gVXNlZnVsIGZvciBBTUQgbW9kdWxlcyB0aGF0IGFsbCBoYXZlIElEcyBpbiB0aGUgZmlsZSxcbiAgICAvL2J1dCBuZWVkIHRvIGZpbmFsbHkgZXhwb3J0IGEgdmFsdWUgdG8gbm9kZSBiYXNlZCBvbiBvbmUgb2YgdGhvc2VcbiAgICAvL0lEcy5cbiAgICBkZWZpbmUucmVxdWlyZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAobG9hZGVyQ2FjaGVbaWRdKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVyQ2FjaGVbaWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlZmluZUNhY2hlW2lkXSkge1xuICAgICAgICAgICAgcnVuRmFjdG9yeS5hcHBseShudWxsLCBkZWZpbmVDYWNoZVtpZF0pO1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRlckNhY2hlW2lkXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBkZWZpbmUuYW1kID0ge307XG5cbiAgICByZXR1cm4gZGVmaW5lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFtZGVmaW5lO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENvbG9yIENvbnRhc3QgQ2hlY2tlclxuICogQW4gYWNjZXNzaWJpbGl0eSBjaGVja2VyIHRvb2wgZm9yIHZhbGlkYXRpbmcgdGhlIGNvbG9yIGNvbnRyYXN0IGJhc2VkIG9uIFdDQUcgMi4wIHN0YW5kYXJkLlxuICogdmFyIGNjYyA9IG5ldyBDb2xvckNvbnRyYXN0Q2hlY2tlcigpO1xuXG4gKiB2YXIgY29sb3IxID0gXCIjRkZGRkZGXCI7XG4gKiB2YXIgY29sb3IyID0gXCIjMDAwMDAwO1xuXG4gKiBpZiAoY2NjLmlzTGV2ZWxBQShjb2xvcjEsIGNvbG9yMiwgMTQpKSB7XG4gKiAgICAgYWxlcnQoXCJWYWxpZCBMZXZlbCBBQVwiKTtcbiAqIH0gZWxzZSB7XG4gKiAgICAgYWxlcnQoXCJJbnZhbGlkIENvbnRyYXN0XCIpO1xuICogfVxuICovXG5cbnZhciBhbWRlZmluZSA9IGZhbHNlO1xuaWYgKHR5cGVvZiBkZWZpbmUgIT09ICdmdW5jdGlvbicpXG4gICAgdmFyIGRlZmluZSA9IHJlcXVpcmUoJ2FtZGVmaW5lJykobW9kdWxlLCByZXF1aXJlKSxcbiAgICAgICAgYW1kZWZpbmUgPSB0cnVlO1xuXG5kZWZpbmUoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXG4gICAgdmFyIENvbG9yQ29udHJhc3RDaGVja2VyID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIENvbG9yQ29udHJhc3RDaGVja2VyLnByb3RvdHlwZSA9IHtcbiAgICAgICAgZm9udFNpemU6IDE0LFxuICAgICAgICByZ2JDbGFzcyA6IHtcbiAgICAgICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxyOiAnICsgdGhpcy5yICtcbiAgICAgICAgICAgICAgICAgICAgJyBnOiAnICsgdGhpcy5nICtcbiAgICAgICAgICAgICAgICAgICAgJyBiOiAnICsgdGhpcy5iICtcbiAgICAgICAgICAgICAgICAgICAgJyA+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaXNWYWxpZFNpeERpZ2l0Q29sb3JDb2RlOiBmdW5jdGlvbiAoaGV4KXtcbiAgICAgICAgICAgIHZhciByZWdTaXhEaWdpdENvbG9yY29kZSA9IC9eKCMpPyhbMC05YS1mQS1GXXs2fSkoWzAtOWEtZkEtRl17Nn0pPyQvO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ1NpeERpZ2l0Q29sb3Jjb2RlLnRlc3QoaGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNWYWxpZFRocmVlRGlnaXRDb2xvckNvZGU6IGZ1bmN0aW9uIChoZXgpe1xuICAgICAgICAgICAgdmFyIHJlZ1RocmVlRGlnaXRDb2xvcmNvZGUgPSAvXigjKT8oWzAtOWEtZkEtRl17M30pKFswLTlhLWZBLUZdezN9KT8kLztcbiAgICAgICAgICAgIHJldHVybiByZWdUaHJlZURpZ2l0Q29sb3Jjb2RlLnRlc3QoaGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNWYWxpZENvbG9yQ29kZSA6IGZ1bmN0aW9uIChoZXgpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZFNpeERpZ2l0Q29sb3JDb2RlKGhleCkgfHwgdGhpcy5pc1ZhbGlkVGhyZWVEaWdpdENvbG9yQ29kZShoZXgpO1xuICAgICAgICB9LFxuICAgICAgICBjb252ZXJ0Q29sb3JUb1NpeERpZ2l0OiBmdW5jdGlvbiAoaGV4KSB7XG4gICAgICAgICAgcmV0dXJuICcjJyArIGhleFsxXSArIGhleFsxXSArIGhleFsyXSArIGhleFsyXSArIGhleFszXSArIGhleFszXTtcbiAgICAgICAgfSxcbiAgICAgICAgaGV4VG9MdW1pbmFuY2U6IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRDb2xvckNvZGUoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb2xvciA6XCIgKyBjb2xvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRUaHJlZURpZ2l0Q29sb3JDb2RlKGNvbG9yKSkge1xuICAgICAgICAgICAgICBjb2xvciA9IHRoaXMuY29udmVydENvbG9yVG9TaXhEaWdpdChjb2xvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbG9yID0gdGhpcy5nZXRSR0JGcm9tSGV4KGNvbG9yKTtcblxuICAgICAgICAgICAgdmFyIExSR0IgPSB0aGlzLmNhbGN1bGF0ZUxSR0IoY29sb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVMdW1pbmFuY2UoTFJHQik7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoY29sb3JBLCBjb2xvckIsIGZvbnRTaXplKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZvbnRTaXplICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9udFNpemUgPSBmb250U2l6ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIWNvbG9yQSB8fCAhY29sb3JCKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbDEgPSB0aGlzLmhleFRvTHVtaW5hbmNlKGNvbG9yQSk7IC8qIGhpZ2hlciB2YWx1ZSAqL1xuICAgICAgICAgICAgdmFyIGwyID0gdGhpcy5oZXhUb0x1bWluYW5jZShjb2xvckIpOyAvKiBsb3dlciB2YWx1ZSAqL1xuICAgICAgICAgICAgdmFyIGNvbnRyYXN0UmF0aW8gPSB0aGlzLmdldENvbnRyYXN0UmF0aW8obDEsIGwyKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVyaWZ5Q29udHJhc3RSYXRpbyhjb250cmFzdFJhdGlvKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tQYWlyczogZnVuY3Rpb24gKHBhaXJzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhaXIuZm9udFNpemUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFpci5jb2xvckEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFpci5jb2xvckIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFpci5mb250U2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFpci5jb2xvckEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFpci5jb2xvckJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfSxcbiAgICAgICAgY2FsY3VsYXRlTHVtaW5hbmNlOiBmdW5jdGlvbihsUkdCKSB7XG4gICAgICAgICAgICByZXR1cm4gKDAuMjEyNiAqIGxSR0IucikgKyAoMC43MTUyICogbFJHQi5nKSArICgwLjA3MjIgKiBsUkdCLmIpO1xuICAgICAgICB9LFxuICAgICAgICBpc0xldmVsQUEgOiBmdW5jdGlvbihjb2xvckEsIGNvbG9yQiwgZm9udFNpemUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrKGNvbG9yQSwgY29sb3JCLCBmb250U2l6ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LldDQUdfQUE7XG4gICAgICAgIH0sXG4gICAgICAgIGlzTGV2ZWxBQUEgOiBmdW5jdGlvbihjb2xvckEsIGNvbG9yQiwgZm9udFNpemUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrKGNvbG9yQSwgY29sb3JCLCBmb250U2l6ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LldDQUdfQUFBO1xuICAgICAgICB9LFxuICAgICAgICBnZXRSR0JGcm9tSGV4IDogZnVuY3Rpb24oY29sb3IpIHtcblxuICAgICAgICAgICAgdmFyIHJnYiA9IE9iamVjdC5jcmVhdGUodGhpcy5yZ2JDbGFzcyksXG4gICAgICAgICAgICAgICAgclZhbCxcbiAgICAgICAgICAgICAgICBnVmFsLFxuICAgICAgICAgICAgICAgIGJWYWw7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29sb3IgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtdXN0IHVzZSBzdHJpbmcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgclZhbCA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gICAgICAgICAgICBnVmFsID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgICAgICAgIGJWYWwgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuXG4gICAgICAgICAgICByZ2IuciA9IHJWYWw7XG4gICAgICAgICAgICByZ2IuZyA9IGdWYWw7XG4gICAgICAgICAgICByZ2IuYiA9IGJWYWw7XG5cbiAgICAgICAgICAgIHJldHVybiByZ2I7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbGN1bGF0ZVNSR0IgOiBmdW5jdGlvbihyZ2IpIHtcbiAgICAgICAgICAgIHZhciBzUkdCID0gT2JqZWN0LmNyZWF0ZSh0aGlzLnJnYkNsYXNzKSxcbiAgICAgICAgICAgICAgICBrZXk7XG5cbiAgICAgICAgICAgIGZvciAoa2V5IGluIHJnYikge1xuICAgICAgICAgICAgICAgIGlmIChyZ2IuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBzUkdCW2tleV0gPSBwYXJzZUZsb2F0KChyZ2Jba2V5XSAvIDI1NSksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzUkdCO1xuICAgICAgICB9LFxuICAgICAgICBjYWxjdWxhdGVMUkdCOiBmdW5jdGlvbiAocmdiKSB7XG4gICAgICAgICAgICB2YXIgc1JHQiA9IHRoaXMuY2FsY3VsYXRlU1JHQihyZ2IpO1xuICAgICAgICAgICAgdmFyIGxSR0IgPSBPYmplY3QuY3JlYXRlKHRoaXMucmdiQ2xhc3MpLFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICB2YWwgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGtleSBpbiBzUkdCKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNSR0IuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHNSR0Jba2V5XSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsIDw9IDAuMDM5MjgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxSR0Jba2V5XSA9ICh2YWwgLyAxMi45Mik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsUkdCW2tleV0gPSBNYXRoLnBvdygoKHZhbCArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxSR0I7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENvbnRyYXN0UmF0aW8gOiBmdW5jdGlvbihsdW1BLCBsdW1CKSB7XG4gICAgICAgICAgICB2YXIgcmF0aW8sXG4gICAgICAgICAgICAgICAgbGlnaHRlcixcbiAgICAgICAgICAgICAgICBkYXJrZXI7XG5cbiAgICAgICAgICAgIGlmIChsdW1BID49IGx1bUIpIHtcbiAgICAgICAgICAgICAgICBsaWdodGVyID0gbHVtQTtcbiAgICAgICAgICAgICAgICBkYXJrZXIgPSBsdW1CO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaWdodGVyID0gbHVtQjtcbiAgICAgICAgICAgICAgICBkYXJrZXIgPSBsdW1BO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByYXRpbyA9IChsaWdodGVyICsgMC4wNSkgLyAoZGFya2VyICsgMC4wNSk7XG5cbiAgICAgICAgICAgIHJldHVybiByYXRpbztcbiAgICAgICAgfSxcbiAgICAgICAgdmVyaWZ5Q29udHJhc3RSYXRpbyA6IGZ1bmN0aW9uKHJhdGlvKSB7XG5cblxuICAgICAgICAgICAgdmFyIHJlc3VsdHNDbGFzcyA9IHtcbiAgICAgICAgICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnPCBXQ0FHLUFBOiAnICsgKCh0aGlzLldDQUdfQUEpID8gJ3Bhc3MnIDogJ2ZhaWwnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnIFdDQUctQUFBOiAnICsgKCh0aGlzLldDQUdfQUFBKSA/ICdwYXNzJyA6ICdmYWlsJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyA+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIFdDQUdfUkVRX1JBVElPX0FBX0xHID0gMy4wLFxuICAgICAgICAgICAgICAgIFdDQUdfUkVRX1JBVElPX0FBX1NNID0gNC41LFxuICAgICAgICAgICAgICAgIFdDQUdfUkVRX1JBVElPX0FBQV9MRyA9IDQuNSxcbiAgICAgICAgICAgICAgICBXQ0FHX1JFUV9SQVRJT19BQUFfU00gPSA3LjAsXG4gICAgICAgICAgICAgICAgV0NBR19GT05UX0NVVE9GRiA9IDE4O1xuXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IE9iamVjdC5jcmVhdGUocmVzdWx0c0NsYXNzKSxcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IHRoaXMuZm9udFNpemUgfHwgMTQ7XG5cbiAgICAgICAgICAgIGlmIChmb250U2l6ZSA+PSBXQ0FHX0ZPTlRfQ1VUT0ZGKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5XQ0FHX0FBID0gKHJhdGlvID49IFdDQUdfUkVRX1JBVElPX0FBX0xHKTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLldDQUdfQUFBID0gKHJhdGlvID49IFdDQUdfUkVRX1JBVElPX0FBQV9MRyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMuV0NBR19BQSA9IChyYXRpbyA+PSBXQ0FHX1JFUV9SQVRJT19BQV9TTSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5XQ0FHX0FBQSA9IChyYXRpbyA+PSBXQ0FHX1JFUV9SQVRJT19BQUFfU00pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHJldHVybiBDb2xvckNvbnRyYXN0Q2hlY2tlcjtcbn0pO1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogcHJvY2Vzcy5jd2QoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgYW5kIGludmFsaWQgZW50cmllc1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfSBlbHNlIGlmICghcGF0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgfVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbiAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzIHRvIGJlIHNhZmUgKG1pZ2h0IGhhcHBlbiB3aGVuIHByb2Nlc3MuY3dkKCkgZmFpbHMpXG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGlzQWJzb2x1dGUgPSBleHBvcnRzLmlzQWJzb2x1dGUocGF0aCksXG4gICAgICB0cmFpbGluZ1NsYXNoID0gc3Vic3RyKHBhdGgsIC0xKSA9PT0gJy8nO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICBpZiAodHlwZW9mIHAgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfSkuam9pbignLycpKTtcbn07XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVsYXRpdmUgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICBmcm9tID0gZXhwb3J0cy5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTtcbiAgdG8gPSBleHBvcnRzLnJlc29sdmUodG8pLnN1YnN0cigxKTtcblxuICBmdW5jdGlvbiB0cmltKGFycikge1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykge1xuICAgICAgaWYgKGFycltzdGFydF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkge1xuICAgICAgaWYgKGFycltlbmRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gW107XG4gICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTtcbiAgfVxuXG4gIHZhciBmcm9tUGFydHMgPSB0cmltKGZyb20uc3BsaXQoJy8nKSk7XG4gIHZhciB0b1BhcnRzID0gdHJpbSh0by5zcGxpdCgnLycpKTtcblxuICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oZnJvbVBhcnRzLmxlbmd0aCwgdG9QYXJ0cy5sZW5ndGgpO1xuICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZyb21QYXJ0c1tpXSAhPT0gdG9QYXJ0c1tpXSkge1xuICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdXRwdXRQYXJ0cyA9IFtdO1xuICBmb3IgKHZhciBpID0gc2FtZVBhcnRzTGVuZ3RoOyBpIDwgZnJvbVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0UGFydHMucHVzaCgnLi4nKTtcbiAgfVxuXG4gIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7XG5cbiAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTtcbn07XG5cbmV4cG9ydHMuc2VwID0gJy8nO1xuZXhwb3J0cy5kZWxpbWl0ZXIgPSAnOic7XG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIHJlc3VsdCA9IHNwbGl0UGF0aChwYXRoKSxcbiAgICAgIHJvb3QgPSByZXN1bHRbMF0sXG4gICAgICBkaXIgPSByZXN1bHRbMV07XG5cbiAgaWYgKCFyb290ICYmICFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lIHdoYXRzb2V2ZXJcbiAgICByZXR1cm4gJy4nO1xuICB9XG5cbiAgaWYgKGRpcikge1xuICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gcm9vdCArIGRpcjtcbn07XG5cblxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uKHBhdGgsIGV4dCkge1xuICB2YXIgZiA9IHNwbGl0UGF0aChwYXRoKVsyXTtcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLyoqXG4gKiBBMTF5IGNvbG9yIGZpZWxkdHlwZSBwbHVnaW4gZm9yIENyYWZ0IENNU1xuICpcbiAqIEExMXljb2xvciBGaWVsZCBKU1xuICpcbiAqIEBhdXRob3IgICAgSWFpbiBCZWFuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxOCBJYWluIEJlYW5cbiAqIEBsaW5rICAgICAgaHR0cHM6Ly9pYWluYmVhbi5jb21cbiAqIEBwYWNrYWdlICAgQTExeUNvbG9yRmllbGR0eXBlXG4gKiBAc2luY2UgICAgIDEuMC4wQTExeUNvbG9yRmllbGR0eXBlQTExeWNvbG9yXG4gKi9cblxudmFyIENvbG9yQ29udHJhc3RDaGVja2VyID0gcmVxdWlyZSgnY29sb3ItY29udHJhc3QtY2hlY2tlcicpO1xuXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuICB2YXIgcGx1Z2luTmFtZSA9ICdBMTF5Q29sb3JGaWVsZCc7XG4gIHZhciBkZWZhdWx0cyA9IHt9O1xuXG4gIC8vIFBsdWdpbiBjb25zdHJ1Y3RvclxuICBmdW5jdGlvbiBQbHVnaW4gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgIHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgdGhpcy5fbmFtZSA9IHBsdWdpbk5hbWU7XG5cbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIFBsdWdpbi5wcm90b3R5cGUgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLmNvbG9yQ29udHJhc3RDaGVja2VyID0gbmV3IENvbG9yQ29udHJhc3RDaGVja2VyKCk7XG5cbiAgICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGNvbG9yRmllbGRDb250YWluZXIgPSAkKF90aGlzLmVsZW1lbnQpO1xuXG4gICAgICAgIF90aGlzLiRjb2xvckZpZWxkID0gJGNvbG9yRmllbGRDb250YWluZXJcbiAgICAgICAgICAuZmluZCgnW25hbWU9XCJmaWVsZHNbJyArIF90aGlzLm9wdGlvbnMuaWQgKyAnXVwiXScpO1xuXG4gICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lclxuICAgICAgICBfdGhpcy4kY29sb3JGaWVsZC5vbignaW5wdXQnLCAkLnByb3h5KF90aGlzLnVwZGF0ZUNvbG9yQ29udHJhc3QsIF90aGlzKSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlQ29sb3JDb250cmFzdDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbnRyYXN0Q29sb3IgPSB0aGlzLm9wdGlvbnMuY29udHJhc3RDb2xvcjtcbiAgICAgIHZhciBmaWVsZENvbG9yID0gdGhpcy4kY29sb3JGaWVsZFswXS52YWx1ZTtcbiAgICAgIHZhciBmb250U2l6ZSA9IDE0O1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgdmFsaWQgMyBvciA2IGNoYXJhY3RlciBoZXggY29kZVxuICAgICAgaWYgKHRoaXMuY29sb3JDb250cmFzdENoZWNrZXIuaXNWYWxpZENvbG9yQ29kZShmaWVsZENvbG9yKSkge1xuICAgICAgICAvLyBHZXQgdGhlIHJhdGlvXG4gICAgICAgIHZhciBsMSA9IHRoaXMuY29sb3JDb250cmFzdENoZWNrZXIuaGV4VG9MdW1pbmFuY2UoY29udHJhc3RDb2xvcik7IC8qIGhpZ2hlciB2YWx1ZSAqL1xuICAgICAgICB2YXIgbDIgPSB0aGlzLmNvbG9yQ29udHJhc3RDaGVja2VyLmhleFRvTHVtaW5hbmNlKGZpZWxkQ29sb3IpOyAvKiBsb3dlciB2YWx1ZSAqL1xuICAgICAgICB2YXIgY29udHJhc3RSYXRpbyA9IHRoaXMuY29sb3JDb250cmFzdENoZWNrZXIuZ2V0Q29udHJhc3RSYXRpbyhsMSwgbDIpO1xuICAgICAgICAvLyBJcyBpdCB2YWxpZD9cbiAgICAgICAgY29uc29sZS5sb2codGhpcy5jb2xvckNvbnRyYXN0Q2hlY2tlci5jaGVjayhjb250cmFzdENvbG9yLCBmaWVsZENvbG9yLCBmb250U2l6ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgSGV4Jyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIEEgcmVhbGx5IGxpZ2h0d2VpZ2h0IHBsdWdpbiB3cmFwcGVyIGFyb3VuZCB0aGUgY29uc3RydWN0b3IsXG4gIC8vIHByZXZlbnRpbmcgYWdhaW5zdCBtdWx0aXBsZSBpbnN0YW50aWF0aW9uc1xuICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghJC5kYXRhKHRoaXMsICdwbHVnaW5fJyArIHBsdWdpbk5hbWUpKSB7XG4gICAgICAgICQuZGF0YSh0aGlzLCAncGx1Z2luXycgKyBwbHVnaW5OYW1lLFxuICAgICAgICAgIG5ldyBQbHVnaW4odGhpcywgb3B0aW9ucykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiJdfQ==\n"]}